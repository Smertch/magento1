function trackClick(t, o, e) {
    var i = {objectID: t.toString(), position: parseInt(o)};
    e && (i.queryID = e), AlgoliaAnalytics.click(i)
}

function trackConversion(t, o) {
    AlgoliaAnalytics.conversion({objectID: t.toString(), queryID: o})
}

document.addEventListener("DOMContentLoaded", function () {
    algoliaBundle.$(function (i) {
        AlgoliaAnalytics.init({
            applicationID: window.algoliaConfig.applicationId,
            apiKey: window.algoliaConfig.apiKey
        }), AlgoliaAnalytics.initSearch({
            getQueryID: function () {
                return search.helper.lastResults && search.helper.lastResults._rawResults.queryID
            }
        }), "undefined" != typeof checkoutSuccessPage && "undefined" != typeof orderedProductIds && checkoutSuccessPage && 0 < orderedProductIds.length && i.each(orderedProductIds, function (t, o) {
            var e = AlgoliaConversionProducts.getQueryID(o);
            e && (AlgoliaConversionProducts.removeProduct(o), trackConversion(o, e))
        }), i(document).on("click", algoliaConfig.ccAnalytics.suggestionSelector, function (t) {
            var o = i(this).attr("data-objectid"), e = i(this).attr("data-queryid");
            AlgoliaConversionProducts.addProduct(o, e), trackClick(o, i(this).attr("data-position"), e)
        })
    })
});